<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stopwatch with Fish Counter</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
    }
    #display {
        font-size: 2em;
        margin-bottom: 20px;
    }
    #fishCounter {
        font-size: 1.2em;
        margin-bottom: 20px;
    }
    #fishControls {
        margin-bottom: 20px;
    }
    input[type="text"] {
        width: 200px;
        padding: 5px;
        margin: 5px;
        border-radius: 5px;
        border: 1px solid #ccc;
    }
    button {
        font-size: 1em;
        padding: 10px 20px;
        margin: 0 5px;
        cursor: pointer;
    }
</style>
</head>
<body>

<div id="display">00:00:00.000</div>
<button id="startStop" onclick="startStop()">Start</button>
<button id="reset" onclick="reset()">Reset</button>

<div id="fishCounter">Fish Caught: 0</div>
<div id="fishControls">
    <button id="addFish" onclick="catchFish()">+ Catch Fish</button>
    <button id="removeFish" onclick="releaseFish()">- Release Fish</button>
</div>

<div id="userData">
    <input type="text" id="comment" placeholder="Add a comment">
    <input type="date" id="date">
    <button id="saveData" onclick="saveData()">Save Data</button>
</div>

<script>
    var timer; // Variable to hold the setInterval() function

    var hours = 0;
    var minutes = 0;
    var seconds = 0;
    var milliseconds = 0;
    var fishCount = 0;

    function startStop() {
        if (!timer) {
            timer = setInterval(updateDisplay, 10); // Update display every 10 milliseconds
            document.getElementById("startStop").innerHTML = "Stop";
        } else {
            clearInterval(timer); // Stop the timer
            timer = null;
            document.getElementById("startStop").innerHTML = "Start";
        }
    }

    function updateDisplay() {
        milliseconds++;
        if (milliseconds >= 100) {
            milliseconds = 0;
            seconds++;
            if (seconds >= 60) {
                seconds = 0;
                minutes++;
                if (minutes >= 60) {
                    minutes = 0;
                    hours++;
                }
            }
        }

        var displayHours = hours < 10 ? "0" + hours : hours;
        var displayMinutes = minutes < 10 ? "0" + minutes : minutes;
        var displaySeconds = seconds < 10 ? "0" + seconds : seconds;
        var displayMilliseconds = milliseconds < 10 ? "00" + milliseconds : milliseconds < 100 ? "0" + milliseconds : milliseconds;

        document.getElementById("display").textContent = displayHours + ":" + displayMinutes + ":" + displaySeconds + "." + displayMilliseconds;
    }

    function reset() {
        clearInterval(timer); // Stop the timer
        timer = null;
        hours = 0;
        minutes = 0;
        seconds = 0;
        milliseconds = 0;
        fishCount = 0;
        document.getElementById("display").textContent = "00:00:00.000";
        updateFishCounter();
        document.getElementById("startStop").innerHTML = "Start";
    }

    function updateFishCounter() {
        document.getElementById("fishCounter").textContent = "Fish Caught: " + fishCount;
    }

    // Increment the fish count
    function catchFish() {
        fishCount++;
        updateFishCounter();
    }

    // Decrement the fish count
    function releaseFish() {
        if (fishCount > 0) {
            fishCount--;
            updateFishCounter();
        }
    }

    // Save data to a text file
    function saveData() {
        var comment = document.getElementById("comment").value;
        var date = document.getElementById("date").value;
        var data = "Fish Caught: " + fishCount + "\nTime Elapsed: " + hours + " hours, " + minutes + " minutes, " + seconds + " seconds, " + milliseconds + " milliseconds";
        if (comment !== "") {
            data += "\nComment: " + comment;
        }
        if (date !== "") {
            data += "\nDate: " + date;
        }
        var blob = new Blob([data], { type: "text/plain;charset=utf-8" });
        saveAs(blob, "fish_data.txt");
    }
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"></script>
</body>
</html>
